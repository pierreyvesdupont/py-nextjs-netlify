{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from \"../../../components/Layout\";\nimport BasicMeta from \"../../../components/meta/BasicMeta\";\nimport OpenGraphMeta from \"../../../components/meta/OpenGraphMeta\";\nimport TwitterCardMeta from \"../../../components/meta/TwitterCardMeta\";\nimport TagPostList from \"../../../components/TagPostList\";\nimport config from \"../../../lib/config\";\nimport { countPosts, listPostContent } from \"../../../lib/posts\";\nimport { getTag, listTags } from \"../../../lib/tags\";\nexport default function Index({\n  posts,\n  tag,\n  pagination,\n  page\n}) {\n  const url = `/posts/tags/${tag.name}` + (page ? `/${page}` : \"\");\n  const title = tag.name;\n  return /*#__PURE__*/_jsxs(Layout, {\n    children: [/*#__PURE__*/_jsx(BasicMeta, {\n      url: url,\n      title: title\n    }), /*#__PURE__*/_jsx(OpenGraphMeta, {\n      url: url,\n      title: title\n    }), /*#__PURE__*/_jsx(TwitterCardMeta, {\n      url: url,\n      title: title\n    }), /*#__PURE__*/_jsx(TagPostList, {\n      posts: posts,\n      tag: tag,\n      pagination: pagination\n    })]\n  });\n}\nexport const getStaticProps = async ({\n  params\n}) => {\n  const queries = params.slug;\n  const [slug, page] = [queries[0], queries[1]];\n  const posts = listPostContent(page ? parseInt(page) : 1, config.posts_per_page, slug);\n  const tag = getTag(slug);\n  const pagination = {\n    current: page ? parseInt(page) : 1,\n    pages: Math.ceil(countPosts(slug) / config.posts_per_page)\n  };\n  const props = {\n    posts,\n    tag,\n    pagination\n  };\n\n  if (page) {\n    props.page = page;\n  }\n\n  return {\n    props\n  };\n};\nexport const getStaticPaths = async () => {\n  const paths = listTags().flatMap(tag => {\n    const pages = Math.ceil(countPosts(tag.slug) / config.posts_per_page);\n    return Array.from(Array(pages).keys()).map(page => page === 0 ? {\n      params: {\n        slug: [tag.slug]\n      }\n    } : {\n      params: {\n        slug: [tag.slug, (page + 1).toString()]\n      }\n    });\n  });\n  return {\n    paths: paths,\n    fallback: false\n  };\n};","map":null,"metadata":{},"sourceType":"module"}